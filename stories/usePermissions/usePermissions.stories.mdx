import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="hookit/usePermissions/Docs" />

# usePermissions

Layer user permissions into your application with hooks

`const permissions = usePermissions(role)`

### Usage

#### JavaScript

```tsx
import { PermissionsProvider, usePermissions } from "@hookit/permissions";

const rules = {
  canDoThis: ["admin", "editor"],
  canDoThat: ["admin"],
};

const Component = () => {
  const { canDoThis, canDoThat } = usePermissions("editor");

  return (
    <>
      {/* editor SHOULD be able to see this button */}
      {canDoThis && <button>Do This</button>}

      {/* editor SHOULD NOT be able to see this button */}
      {canDoThat && <button>Do That</button>}
    </>
  );
};

const App = () => {
  return (
    <PermissionsProvider rules={rules}>
      <Component />
    </PermissionsProvider>
  );
};
```

#### TypeScript

```tsx
import {
  PermissionsProvider,
  usePermissions,
  PermissionsType,
} from "@hookit/permissions";

type Permissions =
  | "canDoThis"
  | "canDoThat"
  | "canGetThis"
  | "canGetThat"
  | "canViewThis"
  | "canViewThat";

type Roles = "admin" | "editor";

const rules: PermissionsType<Permissions, Roles> = {
  canDoThis: ["admin", "editor"],
  canDoThat: ["admin"],
};

const Component = () => {
  const { canDoThis, canDoThat } = usePermissions("editor");

  return (
    <>
      {/* editor SHOULD be able to see this button */}
      {canDoThis && <button>Do This</button>}

      {/* editor SHOULD NOT be able to see this button */}
      {canDoThat && <button>Do That</button>}
    </>
  );
};

const App = () => {
  return (
    <PermissionsProvider rules={rules}>
      <Component />
    </PermissionsProvider>
  );
};
```

You can also utilize enums with `PermissionsType`:

```tsx
import {
  PermissionsProvider,
  usePermissions,
  PermissionsType,
} from "@hookit/permissions";

enum Permissions {
  CAN_DO_THIS = "canDoThis",
  CAN_DO_THAT = "canDoThat",
}

enum Roles {
  ADMIN = "admin",
  EDITOR = "editor",
}

const rules: PermissionsType<Permissions, Roles> = {
  canDoThis: [Roles.ADMIN, Roles.EDITOR],
  canDoThat: [Roles.ADMIN],
};

const Component = () => {
  const { canDoThis, canDoThat } = usePermissions(Roles.EDITOR);

  return (
    <>
      {/* editor SHOULD be able to see this button */}
      {canDoThis && <button>Do This</button>}

      {/* editor SHOULD NOT be able to see this button */}
      {canDoThat && <button>Do That</button>}
    </>
  );
};

const App = () => {
  return (
    <PermissionsProvider rules={rules}>
      <Component />
    </PermissionsProvider>
  );
};
```
